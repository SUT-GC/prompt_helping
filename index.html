<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Studio | æ™ºèƒ½æç¤ºè¯å·¥ä½œå°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --accent-cyan: #00d4ff;
            --accent-purple: #a855f7;
            --accent-pink: #ec4899;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: #2d2d3a;
            --sidebar-width: 220px;
            --glow-cyan: 0 0 20px rgba(0, 212, 255, 0.3);
            --glow-purple: 0 0 20px rgba(168, 85, 247, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* èƒŒæ™¯ */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        /* æ•´ä½“å¸ƒå±€ */
        .app-container {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* ä¾§è¾¹æ  */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 100;
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: var(--glow-cyan);
        }

        .logo-text {
            font-size: 1.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
            font-family: inherit;
            font-size: 0.9rem;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(168, 85, 247, 0.1));
            color: var(--accent-cyan);
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .nav-item-icon {
            font-size: 1.1rem;
            width: 24px;
            text-align: center;
        }

        .nav-spacer {
            flex: 1;
        }

        .sidebar-footer {
            padding: 16px 12px;
            border-top: 1px solid var(--border-color);
        }

        .nav-item.settings {
            position: relative;
        }

        .config-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-muted);
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
        }

        .config-status.configured {
            background: var(--accent-green);
            box-shadow: 0 0 8px var(--accent-green);
        }

        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 32px 40px;
            min-height: 100vh;
        }

        /* é¡µé¢å®¹å™¨ */
        .page {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 12px 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: var(--glow-cyan);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .input-group .form-input {
            flex: 1;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-family: 'Noto Sans SC', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            color: white;
            box-shadow: var(--glow-cyan);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 212, 255, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }

        .btn-small {
            padding: 8px 14px;
            font-size: 0.8rem;
        }

        /* å·¥ä½œåŒºå¸ƒå±€ */
        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 1024px) {
            .workspace {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-tertiary);
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .panel-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .panel-icon.input {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 212, 255, 0.1));
            color: var(--accent-cyan);
        }

        .panel-icon.output {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.1));
            color: var(--accent-purple);
        }

        .panel-body {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex: 1;
            min-height: 350px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 18px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-primary);
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        textarea::placeholder {
            color: var(--text-muted);
        }

        .output-area {
            flex: 1;
            min-height: 350px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 18px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            color: var(--text-primary);
            overflow: auto;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .output-area.loading {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æ¨¡æ¿/æ¡†æ¶é€‰æ‹© */
        .template-section {
            margin-bottom: 24px;
        }

        .template-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
            display: block;
        }

        .template-grid {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .template-btn {
            padding: 10px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .template-btn:hover {
            border-color: var(--accent-purple);
            color: var(--accent-purple);
        }

        .template-btn.active {
            border-color: var(--accent-purple);
            background: rgba(168, 85, 247, 0.1);
            color: var(--accent-purple);
        }

        /* æ¡†æ¶é€‰æ‹©å¡ç‰‡ */
        .framework-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .framework-card {
            padding: 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .framework-card:hover {
            border-color: var(--accent-purple);
        }

        .framework-card.active {
            border-color: var(--accent-purple);
            background: rgba(168, 85, 247, 0.1);
        }

        .framework-card-title {
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .framework-card-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .framework-help-btn {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--border-color);
            border: none;
            color: var(--text-muted);
            font-size: 0.7rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
            transition: all 0.2s ease;
        }

        .framework-help-btn:hover {
            background: var(--accent-purple);
            color: white;
        }

        /* Modal å¼¹çª— */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-tertiary);
        }

        .modal-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--accent-pink);
            border-color: var(--accent-pink);
            color: white;
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(80vh - 80px);
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .modal-body h4 {
            color: var(--accent-cyan);
            margin: 16px 0 8px 0;
            font-size: 0.95rem;
        }

        .modal-body h4:first-child {
            margin-top: 0;
        }

        .modal-body ul {
            padding-left: 20px;
            margin: 8px 0;
        }

        .modal-body li {
            margin: 6px 0;
        }

        .modal-body code {
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85em;
            color: var(--accent-purple);
        }

        /* è½¬æ¢æŒ‰é’®åŒº */
        .action-section {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin: 24px 0;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loader {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border-color);
            border-top-color: var(--accent-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast æç¤º */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 16px 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-color: var(--accent-green);
        }

        .toast.error {
            border-color: var(--accent-pink);
        }

        .toast-link {
            color: var(--accent-cyan);
            cursor: pointer;
            text-decoration: underline;
        }

        /* è®¾ç½®é¡µæˆåŠŸçŠ¶æ€ */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-badge.error {
            background: rgba(236, 72, 153, 0.1);
            color: var(--accent-pink);
            border-color: rgba(236, 72, 153, 0.3);
        }

        .status-badge.pending {
            background: rgba(100, 116, 139, 0.1);
            color: var(--text-muted);
            border-color: rgba(100, 116, 139, 0.3);
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }

            .sidebar-header {
                padding: 16px;
            }

            .logo-text, .nav-item span {
                display: none;
            }

            .nav-item {
                justify-content: center;
                padding: 12px;
            }

            .nav-item-icon {
                margin: 0;
            }

            .main-content {
                margin-left: 60px;
                padding: 24px 16px;
            }

            .config-status {
                right: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>

    <div class="app-container">
        <!-- ä¾§è¾¹æ  -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">âš¡</div>
                    <span class="logo-text">Prompt Studio</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-page="json-converter">
                    <span class="nav-item-icon">ğŸ“</span>
                    <span>JSON è½¬æ¢</span>
                </button>
                <button class="nav-item" data-page="prompt-optimizer">
                    <span class="nav-item-icon">âœ¨</span>
                    <span>Prompt ä¼˜åŒ–</span>
                </button>

                <div class="nav-spacer"></div>
            </nav>

            <div class="sidebar-footer">
                <button class="nav-item settings" data-page="settings">
                    <span class="nav-item-icon">âš™ï¸</span>
                    <span>è®¾ç½®</span>
                    <span class="config-status" id="configStatus"></span>
                </button>
            </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">

            <!-- è®¾ç½®é¡µ -->
            <div class="page" id="page-settings">
                <div class="page-header">
                    <h1 class="page-title">è®¾ç½®</h1>
                    <p class="page-desc">é…ç½®æ¨¡å‹å’Œ API Keyï¼Œè¿™äº›è®¾ç½®å°†åº”ç”¨äºæ‰€æœ‰åŠŸèƒ½</p>
                </div>

                <div class="card">
                    <h3 class="card-title">ğŸ¤– æ¨¡å‹é…ç½®</h3>
                    <div class="form-group">
                        <label class="form-label">é€‰æ‹©æ¨¡å‹</label>
                        <select class="form-input" id="modelSelect">
                            <option value="doubao-seed-1-6-251015">è±†åŒ… Seed 1.6</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">ğŸ”‘ API Key é…ç½®</h3>
                    <div class="form-group">
                        <label class="form-label">è±†åŒ… API Key</label>
                        <div class="input-group">
                            <input
                                type="password"
                                class="form-input"
                                id="apiKey"
                                placeholder="è¾“å…¥æ‚¨çš„ API Key..."
                            >
                            <button class="btn btn-secondary btn-small" onclick="toggleApiKeyVisibility()">
                                ğŸ‘ï¸
                            </button>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <button class="btn btn-primary" onclick="saveAndTestConfig()">
                            ä¿å­˜å¹¶éªŒè¯
                        </button>
                        <span class="status-badge pending" id="apiStatus">
                            <span>â—</span> æœªé…ç½®
                        </span>
                    </div>
                </div>
            </div>

            <!-- JSON è½¬æ¢é¡µ -->
            <div class="page active" id="page-json-converter">
                <div class="page-header">
                    <h1 class="page-title">JSON Prompt è½¬æ¢</h1>
                    <p class="page-desc">å°†è‡ªç„¶è¯­è¨€æç¤ºè¯æ™ºèƒ½è½¬æ¢ä¸ºç»“æ„åŒ– JSON Prompting</p>
                </div>

                <div class="template-section">
                    <label class="template-label">é€‰æ‹©è¾“å‡ºç±»å‹ï¼š</label>
                    <div class="template-grid" id="jsonTemplateGrid">
                        <button class="template-btn active" data-type="image">ğŸ¨ å›¾åƒç”Ÿæˆ</button>
                        <button class="template-btn" data-type="infographic">ğŸ“Š ä¿¡æ¯å›¾è¡¨</button>
                        <button class="template-btn" data-type="architecture">ğŸ—ï¸ ä»£ç æ¶æ„</button>
                    </div>
                </div>

                <div class="workspace">
                    <div class="panel">
                        <div class="panel-header">
                            <div class="panel-title">
                                <div class="panel-icon input">ğŸ“</div>
                                <span>åŸå§‹ Prompt è¾“å…¥</span>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="clearInput('jsonInput')">æ¸…ç©º</button>
                        </div>
                        <div class="panel-body">
                            <textarea
                                id="jsonInput"
                                placeholder="åœ¨è¿™é‡Œè¾“å…¥ä½ çš„è‡ªç„¶è¯­è¨€æç¤ºè¯...

ä¾‹å¦‚ï¼š
è¯·ç”Ÿæˆä¸€å¼ æ’ç­ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–çš„æ€»ç»“å›¾ã€‚æ ‡é¢˜æ˜¯ Schedule Calendar æ€§èƒ½ä¼˜åŒ–ã€‚

å†…å®¹è¦ä½“ç°ä¸‰æœŸä¼˜åŒ–ï¼š
- ä¸€æœŸï¼šMax RT ä» 26s é™åˆ° 21s
- äºŒæœŸï¼šP99 ä» 6.2s é™åˆ° 3.1s
- ä¸‰æœŸï¼šNPS æå‡ 124.9%

é£æ ¼ï¼šæ¶‚é¸¦é£æ ¼ï¼Œé©¬å…‹ç¬”è§¦æ„Ÿï¼Œç±³è‰²èƒŒæ™¯ï¼Œé»„è‰²è“è‰²é«˜å…‰"
                            ></textarea>
                        </div>
                    </div>

                    <div class="panel">
                        <div class="panel-header">
                            <div class="panel-title">
                                <div class="panel-icon output">ğŸ”®</div>
                                <span>JSON Prompt è¾“å‡º</span>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn btn-secondary btn-small" onclick="copyOutput('jsonOutput')">ğŸ“‹ å¤åˆ¶</button>
                                <button class="btn btn-secondary btn-small" onclick="downloadJSON()">ğŸ’¾ ä¸‹è½½</button>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="output-area" id="jsonOutput">
                                <span style="color: var(--text-muted);">è½¬æ¢åçš„ JSON Prompt å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-section">
                    <button class="btn btn-primary" id="jsonConvertBtn" onclick="convertToJSON()">
                        âœ¨ è½¬æ¢ä¸º JSON Prompt
                    </button>
                </div>
            </div>

            <!-- Prompt ä¼˜åŒ–é¡µ -->
            <div class="page" id="page-prompt-optimizer">
                <div class="page-header">
                    <h1 class="page-title">Prompt ä¼˜åŒ–å™¨</h1>
                    <p class="page-desc">ä½¿ç”¨ä¸šç•Œä¸»æµæ¡†æ¶å°†ç²—ç³™ Prompt ä¼˜åŒ–ä¸ºç»“æ„åŒ–çš„é«˜è´¨é‡ Prompt</p>
                </div>

                <div class="template-section">
                    <label class="template-label">é€‰æ‹©ä¼˜åŒ–æ¡†æ¶ï¼š</label>
                    <div class="framework-grid" id="frameworkGrid">
                        <div class="framework-card active" data-framework="rtf">
                            <div class="framework-card-title">
                                ğŸš€ RTF
                                <button class="framework-help-btn" onclick="showFrameworkHelp(event, 'rtf')">?</button>
                            </div>
                            <div class="framework-card-desc">Role-Task-Formatï¼Œç®€å•å¿«é€Ÿ</div>
                        </div>
                        <div class="framework-card" data-framework="costar">
                            <div class="framework-card-title">
                                ğŸ“ CO-STAR
                                <button class="framework-help-btn" onclick="showFrameworkHelp(event, 'costar')">?</button>
                            </div>
                            <div class="framework-card-desc">é€‚åˆå†…å®¹åˆ›ä½œã€è¥é”€æ–‡æ¡ˆ</div>
                        </div>
                        <div class="framework-card" data-framework="risen">
                            <div class="framework-card-title">
                                ğŸ¯ RISEN
                                <button class="framework-help-btn" onclick="showFrameworkHelp(event, 'risen')">?</button>
                            </div>
                            <div class="framework-card-desc">ç²¾å‡†æ§åˆ¶ï¼Œé€‚åˆå¤æ‚ä»»åŠ¡</div>
                        </div>
                        <div class="framework-card" data-framework="crispe">
                            <div class="framework-card-title">
                                ğŸ”§ CRISPE
                                <button class="framework-help-btn" onclick="showFrameworkHelp(event, 'crispe')">?</button>
                            </div>
                            <div class="framework-card-desc">å¤šæ­¥éª¤ä»»åŠ¡ï¼Œéœ€è¦çº¦æŸ</div>
                        </div>
                        <div class="framework-card" data-framework="roses">
                            <div class="framework-card-title">
                                ğŸ“Š ROSES
                                <button class="framework-help-btn" onclick="showFrameworkHelp(event, 'roses')">?</button>
                            </div>
                            <div class="framework-card-desc">æˆ˜ç•¥å†³ç­–ã€é—®é¢˜åˆ†æ</div>
                        </div>
                    </div>
                </div>

                <div class="workspace">
                    <div class="panel">
                        <div class="panel-header">
                            <div class="panel-title">
                                <div class="panel-icon input">ğŸ“</div>
                                <span>åŸå§‹ Prompt</span>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="clearInput('optimizerInput')">æ¸…ç©º</button>
                        </div>
                        <div class="panel-body">
                            <textarea
                                id="optimizerInput"
                                placeholder="è¾“å…¥ä½ æƒ³è¦ä¼˜åŒ–çš„ç²—ç³™ Prompt...

ä¾‹å¦‚ï¼š
å¸®æˆ‘å†™ä¸€ç¯‡å…³äºäººå·¥æ™ºèƒ½çš„æ–‡ç« "
                            ></textarea>
                        </div>
                    </div>

                    <div class="panel">
                        <div class="panel-header">
                            <div class="panel-title">
                                <div class="panel-icon output">âœ¨</div>
                                <span>ä¼˜åŒ–åçš„ Prompt</span>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="copyOutput('optimizerOutput')">ğŸ“‹ å¤åˆ¶</button>
                        </div>
                        <div class="panel-body">
                            <div class="output-area" id="optimizerOutput">
                                <span style="color: var(--text-muted);">ä¼˜åŒ–åçš„ Prompt å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-section">
                    <button class="btn btn-primary" id="optimizeBtn" onclick="optimizePrompt()">
                        âœ¨ ä¼˜åŒ– Prompt
                    </button>
                </div>
            </div>

        </main>
    </div>

    <!-- Toast æç¤º -->
    <div class="toast" id="toast"></div>

    <!-- æ¡†æ¶å¸®åŠ© Modal -->
    <div class="modal-overlay" id="frameworkModal" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">æ¡†æ¶è¯´æ˜</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // ==================== å…¨å±€çŠ¶æ€ ====================
        let currentPage = 'json-converter';
        let selectedJsonType = 'image';
        let selectedFramework = 'rtf';
        let jsonOutput = '';
        let optimizerOutput = '';
        let promptsCache = {};

        // ==================== é…ç½®ç®¡ç† ====================
        function getConfig() {
            return {
                apiKey: localStorage.getItem('api_key') || '',
                model: localStorage.getItem('model') || 'doubao-seed-1-6-251015',
                isConfigured: localStorage.getItem('api_configured') === 'true'
            };
        }

        function saveConfig(apiKey, model) {
            localStorage.setItem('api_key', apiKey);
            localStorage.setItem('model', model);
        }

        function setConfigured(status) {
            localStorage.setItem('api_configured', status);
            updateConfigStatus();
        }

        function checkConfig() {
            const config = getConfig();
            if (!config.apiKey || !config.isConfigured) {
                showToast('è¯·å…ˆåœ¨è®¾ç½®é¡µé¢é…ç½® API Key', 'error', true);
                return false;
            }
            return true;
        }

        function updateConfigStatus() {
            const config = getConfig();
            const statusDot = document.getElementById('configStatus');
            const statusBadge = document.getElementById('apiStatus');

            if (config.isConfigured) {
                statusDot.classList.add('configured');
                if (statusBadge) {
                    statusBadge.className = 'status-badge';
                    statusBadge.innerHTML = '<span>â—</span> å·²éªŒè¯';
                }
            } else {
                statusDot.classList.remove('configured');
                if (statusBadge) {
                    statusBadge.className = 'status-badge pending';
                    statusBadge.innerHTML = '<span>â—</span> æœªé…ç½®';
                }
            }
        }

        // ==================== é¡µé¢å¯¼èˆª ====================
        function navigateTo(pageName) {
            currentPage = pageName;

            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === pageName) {
                    item.classList.add('active');
                }
            });

            // åˆ‡æ¢é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`page-${pageName}`).classList.add('active');
        }

        // ç»‘å®šå¯¼èˆªäº‹ä»¶
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                navigateTo(item.dataset.page);
            });
        });

        // ==================== è®¾ç½®é¡µåŠŸèƒ½ ====================
        function toggleApiKeyVisibility() {
            const input = document.getElementById('apiKey');
            input.type = input.type === 'password' ? 'text' : 'password';
        }

        async function saveAndTestConfig() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const model = document.getElementById('modelSelect').value;
            const statusBadge = document.getElementById('apiStatus');

            if (!apiKey) {
                showToast('è¯·è¾“å…¥ API Key', 'error');
                return;
            }

            // ä¿å­˜é…ç½®
            saveConfig(apiKey, model);

            // æ˜¾ç¤ºéªŒè¯ä¸­çŠ¶æ€
            statusBadge.className = 'status-badge pending';
            statusBadge.innerHTML = '<span>â—</span> éªŒè¯ä¸­...';

            try {
                const response = await fetch('/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        max_tokens: 10,
                        messages: [{ role: 'user', content: 'Hi' }]
                    })
                });

                if (response.ok) {
                    setConfigured('true');
                    showToast('âœ… é…ç½®ä¿å­˜æˆåŠŸï¼ŒAPI Key å·²éªŒè¯', 'success');
                } else {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'éªŒè¯å¤±è´¥');
                }
            } catch (err) {
                setConfigured('false');
                statusBadge.className = 'status-badge error';
                statusBadge.innerHTML = '<span>â—</span> éªŒè¯å¤±è´¥';
                showToast(`âŒ API Key éªŒè¯å¤±è´¥: ${err.message}`, 'error');
            }
        }

        // ==================== JSON è½¬æ¢åŠŸèƒ½ ====================
        // æ¨¡æ¿é€‰æ‹©
        document.querySelectorAll('#jsonTemplateGrid .template-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('#jsonTemplateGrid .template-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedJsonType = btn.dataset.type;
            });
        });

        async function getSystemPrompt(type) {
            if (promptsCache[type]) {
                return promptsCache[type];
            }

            try {
                const response = await fetch(`/prompts/${type}`);
                if (response.ok) {
                    const data = await response.json();
                    promptsCache[type] = data.content;
                    return data.content;
                } else {
                    throw new Error(`è·å– ${type} prompt å¤±è´¥`);
                }
            } catch (err) {
                console.error('è·å– prompt å¤±è´¥:', err);
                throw err;
            }
        }

        async function convertToJSON() {
            if (!checkConfig()) return;

            const config = getConfig();
            const inputPrompt = document.getElementById('jsonInput').value.trim();
            const outputArea = document.getElementById('jsonOutput');
            const convertBtn = document.getElementById('jsonConvertBtn');

            if (!inputPrompt) {
                showToast('è¯·è¾“å…¥è¦è½¬æ¢çš„ Prompt', 'error');
                return;
            }

            convertBtn.disabled = true;
            convertBtn.innerHTML = 'â³ è½¬æ¢ä¸­...';
            outputArea.innerHTML = '<div class="loader"></div>';
            outputArea.classList.add('loading');

            try {
                const systemPrompt = await getSystemPrompt(selectedJsonType);

                const response = await fetch('/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${config.apiKey}`
                    },
                    body: JSON.stringify({
                        model: config.model,
                        max_tokens: 4096,
                        messages: [
                            { role: 'system', content: systemPrompt },
                            {
                                role: 'user',
                                content: `è¯·å°†ä»¥ä¸‹è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºç»“æ„åŒ–çš„ JSON Promptã€‚\n\n${inputPrompt}\n\nè¯·ç›´æ¥è¾“å‡º JSONï¼Œä¸è¦åŒ…å«ä»»ä½•è§£é‡Šæˆ– markdown ä»£ç å—æ ‡è®°ã€‚`
                            }
                        ]
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'è¯·æ±‚å¤±è´¥');
                }

                const data = await response.json();
                const content = data.choices[0].message.content;

                try {
                    const parsed = JSON.parse(content);
                    jsonOutput = JSON.stringify(parsed, null, 2);
                } catch {
                    jsonOutput = content;
                }

                outputArea.classList.remove('loading');
                outputArea.innerHTML = syntaxHighlight(jsonOutput);
                showToast('âœ… è½¬æ¢æˆåŠŸï¼', 'success');

            } catch (err) {
                outputArea.classList.remove('loading');
                outputArea.innerHTML = `<span style="color: var(--accent-pink);">âŒ é”™è¯¯: ${err.message}</span>`;
                showToast(`è½¬æ¢å¤±è´¥: ${err.message}`, 'error');
            } finally {
                convertBtn.disabled = false;
                convertBtn.innerHTML = 'âœ¨ è½¬æ¢ä¸º JSON Prompt';
            }
        }

        function syntaxHighlight(json) {
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'color: #f59e0b;';
                if (/^"/.test(match)) {
                    if (/:$/.test(match)) {
                        cls = 'color: #00d4ff;';
                    } else {
                        cls = 'color: #10b981;';
                    }
                } else if (/true|false/.test(match)) {
                    cls = 'color: #a855f7;';
                } else if (/null/.test(match)) {
                    cls = 'color: #ec4899;';
                }
                return '<span style="' + cls + '">' + match + '</span>';
            });
        }

        function downloadJSON() {
            if (!jsonOutput) {
                showToast('æ²¡æœ‰å¯ä¸‹è½½çš„å†…å®¹', 'error');
                return;
            }
            const blob = new Blob([jsonOutput], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `json-prompt-${selectedJsonType}-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showToast('âœ… ä¸‹è½½æˆåŠŸ', 'success');
        }

        // ==================== Prompt ä¼˜åŒ–åŠŸèƒ½ ====================
        // æ¡†æ¶é€‰æ‹©
        document.querySelectorAll('#frameworkGrid .framework-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('#frameworkGrid .framework-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');
                selectedFramework = card.dataset.framework;
            });
        });

        async function getOptimizerPrompt(framework) {
            const cacheKey = `optimizer_${framework}`;
            if (promptsCache[cacheKey]) {
                return promptsCache[cacheKey];
            }

            try {
                const response = await fetch(`/prompts/optimizer_${framework}`);
                if (response.ok) {
                    const data = await response.json();
                    promptsCache[cacheKey] = data.content;
                    return data.content;
                } else {
                    throw new Error(`è·å– ${framework} æ¡†æ¶ prompt å¤±è´¥`);
                }
            } catch (err) {
                console.error('è·å– prompt å¤±è´¥:', err);
                throw err;
            }
        }

        async function optimizePrompt() {
            if (!checkConfig()) return;

            const config = getConfig();
            const inputPrompt = document.getElementById('optimizerInput').value.trim();
            const outputArea = document.getElementById('optimizerOutput');
            const optimizeBtn = document.getElementById('optimizeBtn');

            if (!inputPrompt) {
                showToast('è¯·è¾“å…¥è¦ä¼˜åŒ–çš„ Prompt', 'error');
                return;
            }

            optimizeBtn.disabled = true;
            optimizeBtn.innerHTML = 'â³ ä¼˜åŒ–ä¸­...';
            outputArea.innerHTML = '<div class="loader"></div>';
            outputArea.classList.add('loading');

            try {
                const systemPrompt = await getOptimizerPrompt(selectedFramework);

                const response = await fetch('/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${config.apiKey}`
                    },
                    body: JSON.stringify({
                        model: config.model,
                        max_tokens: 4096,
                        messages: [
                            { role: 'system', content: systemPrompt },
                            {
                                role: 'user',
                                content: `è¯·å°†ä»¥ä¸‹ç²—ç³™çš„ Prompt æŒ‰ç…§æ¡†æ¶è¿›è¡Œä¼˜åŒ–ï¼š\n\n${inputPrompt}`
                            }
                        ]
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'è¯·æ±‚å¤±è´¥');
                }

                const data = await response.json();
                optimizerOutput = data.choices[0].message.content;

                outputArea.classList.remove('loading');
                outputArea.textContent = optimizerOutput;
                showToast('âœ… ä¼˜åŒ–æˆåŠŸï¼', 'success');

            } catch (err) {
                outputArea.classList.remove('loading');
                outputArea.innerHTML = `<span style="color: var(--accent-pink);">âŒ é”™è¯¯: ${err.message}</span>`;
                showToast(`ä¼˜åŒ–å¤±è´¥: ${err.message}`, 'error');
            } finally {
                optimizeBtn.disabled = false;
                optimizeBtn.innerHTML = 'âœ¨ ä¼˜åŒ– Prompt';
            }
        }

        // ==================== é€šç”¨åŠŸèƒ½ ====================
        function clearInput(inputId) {
            document.getElementById(inputId).value = '';
        }

        function copyOutput(outputId) {
            const output = outputId === 'jsonOutput' ? jsonOutput : optimizerOutput;
            if (!output) {
                showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹', 'error');
                return;
            }
            navigator.clipboard.writeText(output).then(() => {
                showToast('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
            }).catch(() => {
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        function showToast(message, type = 'info', showLink = false) {
            const toast = document.getElementById('toast');
            if (showLink) {
                toast.innerHTML = `${message} <span class="toast-link" onclick="navigateTo('settings')">å»è®¾ç½®</span>`;
            } else {
                toast.textContent = message;
            }
            toast.className = `toast ${type} show`;
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ==================== æ¡†æ¶å¸®åŠ© Modal ====================
        const frameworkInfo = {
            rtf: {
                icon: 'ğŸš€',
                name: 'RTF æ¡†æ¶',
                fullName: 'Role - Task - Format',
                desc: 'æœ€ç®€æ´é«˜æ•ˆçš„ Prompt æ¡†æ¶ï¼Œé€‚åˆæ—¥å¸¸å¿«é€Ÿä»»åŠ¡ã€‚',
                components: [
                    { letter: 'R', name: 'Roleï¼ˆè§’è‰²ï¼‰', desc: 'å®šä¹‰ AI æ‰®æ¼”çš„è§’è‰²èº«ä»½' },
                    { letter: 'T', name: 'Taskï¼ˆä»»åŠ¡ï¼‰', desc: 'æ˜ç¡®è¦å®Œæˆçš„å…·ä½“ä»»åŠ¡' },
                    { letter: 'F', name: 'Formatï¼ˆæ ¼å¼ï¼‰', desc: 'æŒ‡å®šè¾“å‡ºçš„æ ¼å¼è¦æ±‚' }
                ],
                bestFor: 'ç®€å•ä»»åŠ¡ã€æ—¥å¸¸é—®ç­”ã€å¿«é€ŸæŒ‡ä»¤'
            },
            costar: {
                icon: 'ğŸ“',
                name: 'CO-STAR æ¡†æ¶',
                fullName: 'Context - Objective - Style - Tone - Audience - Response',
                desc: 'ä¸“ä¸ºå†…å®¹åˆ›ä½œè®¾è®¡çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿäº§å‡ºé£æ ¼ç²¾å‡†çš„æ–‡æ¡ˆã€‚',
                components: [
                    { letter: 'C', name: 'Contextï¼ˆèƒŒæ™¯ï¼‰', desc: 'æä¾›ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ä¿¡æ¯' },
                    { letter: 'O', name: 'Objectiveï¼ˆç›®æ ‡ï¼‰', desc: 'æ˜ç¡®è¦è¾¾æˆçš„ç»“æœ' },
                    { letter: 'S', name: 'Styleï¼ˆé£æ ¼ï¼‰', desc: 'æŒ‡å®šå†™ä½œæˆ–è¡¨è¾¾é£æ ¼' },
                    { letter: 'T', name: 'Toneï¼ˆè¯­æ°”ï¼‰', desc: 'å®šä¹‰æƒ…æ„ŸåŸºè°ƒ' },
                    { letter: 'A', name: 'Audienceï¼ˆå—ä¼—ï¼‰', desc: 'æ˜ç¡®ç›®æ ‡è¯»è€…ç¾¤ä½“' },
                    { letter: 'R', name: 'Responseï¼ˆå“åº”ï¼‰', desc: 'æŒ‡å®šè¾“å‡ºå½¢å¼' }
                ],
                bestFor: 'è¥é”€æ–‡æ¡ˆã€å†…å®¹åˆ›ä½œã€å“ç‰Œä¼ æ’­'
            },
            risen: {
                icon: 'ğŸ¯',
                name: 'RISEN æ¡†æ¶',
                fullName: 'Role - Instructions - Steps - End goal - Narrowing',
                desc: 'ç²¾å‡†æ§åˆ¶å‹æ¡†æ¶ï¼Œé€‚åˆéœ€è¦è¯¦ç»†æŒ‡å¯¼çš„å¤æ‚ä»»åŠ¡ã€‚',
                components: [
                    { letter: 'R', name: 'Roleï¼ˆè§’è‰²ï¼‰', desc: 'å®šä¹‰ AI çš„èº«ä»½å’Œä¸“ä¸šèƒŒæ™¯' },
                    { letter: 'I', name: 'Instructionsï¼ˆæŒ‡ä»¤ï¼‰', desc: 'ç»™å‡ºå…·ä½“çš„æ‰§è¡ŒæŒ‡ä»¤' },
                    { letter: 'S', name: 'Stepsï¼ˆæ­¥éª¤ï¼‰', desc: 'åˆ†è§£ä»»åŠ¡çš„æ‰§è¡Œæ­¥éª¤' },
                    { letter: 'E', name: 'End goalï¼ˆæœŸæœ›ç»“æœï¼‰', desc: 'æ˜ç¡®æœ€ç»ˆè¦è¾¾æˆçš„ç›®æ ‡' },
                    { letter: 'N', name: 'Narrowingï¼ˆé™åˆ¶ï¼‰', desc: 'æŒ‡å®šçº¦æŸã€è¾¹ç•Œå’Œæ³¨æ„äº‹é¡¹' }
                ],
                bestFor: 'æŠ€æœ¯æ–‡æ¡£ã€ä»£ç å®¡æŸ¥ã€å¤æ‚åˆ†æ'
            },
            crispe: {
                icon: 'ğŸ”§',
                name: 'CRISPE æ¡†æ¶',
                fullName: 'Context - Role - Input - Steps - Parameters - Example',
                desc: 'å¼ºè°ƒçº¦æŸå’Œç¤ºä¾‹çš„æ¡†æ¶ï¼Œé€‚åˆéœ€è¦ä¸¥æ ¼è¾“å‡ºæ ¼å¼çš„ä»»åŠ¡ã€‚',
                components: [
                    { letter: 'C', name: 'Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰', desc: 'æä¾›ä»»åŠ¡èƒŒæ™¯å’Œç›¸å…³ä¿¡æ¯' },
                    { letter: 'R', name: 'Roleï¼ˆè§’è‰²ï¼‰', desc: 'å®šä¹‰ AI çš„èº«ä»½' },
                    { letter: 'I', name: 'Inputï¼ˆè¾“å…¥ï¼‰', desc: 'è¯´æ˜ä¼šæä¾›ä»€ä¹ˆä¿¡æ¯' },
                    { letter: 'S', name: 'Stepsï¼ˆæ­¥éª¤ï¼‰', desc: 'æè¿°æ‰§è¡Œè¿‡ç¨‹' },
                    { letter: 'P', name: 'Parametersï¼ˆå‚æ•°ï¼‰', desc: 'æŒ‡å®šé™åˆ¶æ¡ä»¶å’Œè§„èŒƒ' },
                    { letter: 'E', name: 'Exampleï¼ˆç¤ºä¾‹ï¼‰', desc: 'æä¾›å‚è€ƒæ ·ä¾‹' }
                ],
                bestFor: 'å¤šæ­¥éª¤ä»»åŠ¡ã€æ ¼å¼è½¬æ¢ã€è§„èŒƒåŒ–è¾“å‡º'
            },
            roses: {
                icon: 'ğŸ“Š',
                name: 'ROSES æ¡†æ¶',
                fullName: 'Role - Objective - Scenario - Expected Solution - Steps',
                desc: 'é¢å‘æˆ˜ç•¥å†³ç­–å’Œé—®é¢˜åˆ†æçš„æ¡†æ¶ï¼Œé€‚åˆå¤æ‚é—®é¢˜çš„åˆ†æå’Œè§„åˆ’ã€‚',
                components: [
                    { letter: 'R', name: 'Roleï¼ˆè§’è‰²ï¼‰', desc: 'å®šä¹‰ä¸“ä¸šèº«ä»½å’Œè§†è§’' },
                    { letter: 'O', name: 'Objectiveï¼ˆç›®æ ‡ï¼‰', desc: 'æ˜ç¡®è¦è§£å†³çš„é—®é¢˜æˆ–è¾¾æˆçš„ç›®æ ‡' },
                    { letter: 'S', name: 'Scenarioï¼ˆåœºæ™¯ï¼‰', desc: 'æè¿°å½“å‰æƒ…å†µå’ŒèƒŒæ™¯' },
                    { letter: 'E', name: 'Expected Solutionï¼ˆæœŸæœ›æ–¹æ¡ˆï¼‰', desc: 'è¯´æ˜ç†æƒ³çš„ç»“æœå½¢æ€' },
                    { letter: 'S', name: 'Stepsï¼ˆæ­¥éª¤ï¼‰', desc: 'å®šä¹‰åˆ†ææˆ–æ‰§è¡Œçš„è·¯å¾„' }
                ],
                bestFor: 'æˆ˜ç•¥è§„åˆ’ã€é—®é¢˜è¯Šæ–­ã€æ–¹æ¡ˆè®¾è®¡'
            }
        };

        function showFrameworkHelp(event, framework) {
            event.stopPropagation(); // é˜»æ­¢è§¦å‘å¡ç‰‡é€‰æ‹©
            const info = frameworkInfo[framework];
            if (!info) return;

            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            modalTitle.innerHTML = `${info.icon} ${info.name}`;

            let componentsHtml = info.components.map(c =>
                `<li><code>${c.letter}</code> <strong>${c.name}</strong>ï¼š${c.desc}</li>`
            ).join('');

            modalBody.innerHTML = `
                <h4>å…¨ç§°</h4>
                <p>${info.fullName}</p>

                <h4>æ¡†æ¶è¯´æ˜</h4>
                <p>${info.desc}</p>

                <h4>ç»„æˆè¦ç´ </h4>
                <ul>${componentsHtml}</ul>

                <h4>æœ€é€‚åˆåœºæ™¯</h4>
                <p>${info.bestFor}</p>
            `;

            document.getElementById('frameworkModal').classList.add('show');
        }

        function closeModal(event) {
            if (event && event.target !== event.currentTarget) return;
            document.getElementById('frameworkModal').classList.remove('show');
        }

        // ESC é”®å…³é—­ Modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ==================== åˆå§‹åŒ– ====================
        window.addEventListener('load', () => {
            // æ¢å¤é…ç½®
            const config = getConfig();
            document.getElementById('apiKey').value = config.apiKey;
            document.getElementById('modelSelect').value = config.model;

            // æ›´æ–°çŠ¶æ€
            updateConfigStatus();
        });
    </script>
</body>
</html>
